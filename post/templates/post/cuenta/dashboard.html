{% extends "post/base.html" %}
{% load static %}

{% block title %}Panel de Cuenta - {{ block.super }}{% endblock %}

{% block content %}
<div class="account-container">
    <h1>Mi Cuenta</h1>
    <div class="account-grid">
        <aside class="account-nav">
            <ul>
                <li><a href="{% url 'tienda:cuenta_dashboard' %}" class="active">Panel Principal</a></li>
                <li><a href="{% url 'tienda:lista_pedidos_cliente' %}">Mis Pedidos</a></li>
                <li><a href="{% url 'tienda:editar_perfil_cliente' %}">Editar Perfil</a></li>
                <li><a href="{% url 'tienda:password_change' %}">Cambiar Contraseña</a></li>
                <li><a href="{% url 'tienda:ver_lista_deseos' %}">Mi Lista de Deseos</a></li>
                <li>
            
                </li>
            </ul>
        </aside>
        <main class="account-content">
            <section class="welcome-box">
                <h2>¡Hola, {{ cliente.nombre|default:request.user.username }}!</h2>
                <p>Bienvenido a tu panel de cuenta. Desde aquí puedes ver tus pedidos recientes, gestionar tu información personal y más.</p>
            </section>
            <section>
                <h3>Últimos Pedidos</h3>
                {% if ultimos_pedidos %}
                    <table class="recent-orders-table">
                        <thead><tr><th>Nº Pedido</th><th>Fecha</th><th>Total</th><th>Estado</th><th>Acción</th></tr></thead>
                        <tbody>
                            {% for pedido_obj in ultimos_pedidos %}
                            <tr>
                                <td><a href="{% url 'tienda:detalle_pedido_cliente' pedido_id=pedido_obj.id %}">{{ pedido_obj.codigo }}</a></td>
                                <td>{{ pedido_obj.creado|date:"d M Y" }}</td>
                                <td>{{ pedido_obj.total|floatformat:2 }} {{moneda_simbolo|default:'$'}}</td>
                                <td>{{ pedido_obj.get_estado_display }}</td>
                                <td><a href="{% url 'tienda:detalle_pedido_cliente' pedido_id=pedido_obj.id %}">Ver Detalles</a></td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% else %}
                    <p>Aún no has realizado ningún pedido.</p>
                {% endif %}
                <div class="quick-links"> <a href="{% url 'tienda:lista_pedidos_cliente' %}">Ver todos los pedidos</a></div>
            </section>
            <hr class="section-divider">
            <section class="info-section">
                 <h3>Información de Contacto</h3>
                 <p><strong>Nombre:</strong> {{ cliente.nombre_completo|default:"No especificado" }}</p>
                 <p><strong>Email:</strong> {{ cliente.email|default:request.user.email }}</p>
                 <p><strong>Teléfono:</strong> {{ cliente.telefono|default:"No especificado" }}</p>
                 <div class="quick-links info-quick-links"> <a href="{% url 'tienda:editar_perfil_cliente' %}">Editar información</a></div>
            </section>
        </main>
    </div>
</div>
{% endblock %}
